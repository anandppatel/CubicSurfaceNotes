\documentclass[12 pt]{amsart}

%============================
%         Obligatory
%============================
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{mathrsfs}
\usepackage{tikz}
\usepackage{array}

%============================
%         Aesthetic
%============================
\usepackage[hidelinks]{hyperref} % For citations without hideous colored boxes
\usepackage{geometry} % For adjusting the page domensions if desired
%\usepackage{sectsty} % For centering Section/Subsection titles
\usepackage{marginnote} % Currently unused, but for notes in the margin
\usepackage{graphics} % For custom pretty fractions 
\usepackage{newtxmath} % Changes the math font to be bolder and prettier
\usepackage{cleveref} % stackexchange says to load this after hyperref

\geometry{margin=1.66 in}
%\sectionfont{\centering}
%\subsectionfont{\centering}
\linespread{1.1}


\title{Counting Cubic Surfaces}
\author{Anand Deopurkar, Anand Patel \& Dennis Tseng}


\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{definition}{Definition}[section]

\newenvironment{example}{\textbf{Example:}}{}
\newenvironment{remark}{\textbf{Remark:}}{}

% chk is a stylized "dual" symbol created by altering the vee command 
\newcommand{\chk}[1]{#1^{\text{\scalebox{.8}[.6]{$\boldsymbol{\vee}$}}}}

% altfrac and altfraci are twin commands for alternate fractions. The difference between them is that altfrac is bogger and prettier, while altfraci fits in inline mode. In the future I plan to merge them into one command which checks the displaystyle and uses the appropriate form of the command. Note that this command is specialized to the newtxmath package, and without it the fraction shape could be distorted. This can be solved by adjusting the different numbers in the command.
\newcommand{\altfrac}[2]{\ifmmode\def\tmp{$}\else\def\tmp{}\fi
		\mbox{{\raisebox{.5\ht\strutbox}{\tmp#1\tmp}}
		\kern-5pt\scalebox{1.75}[1.5]{/}\kern-1.5pt
		\mbox{\raisebox{-.2\ht\strutbox}{\tmp#2\tmp}}}
}

\newcommand{\altfraci}[2]{\ifmmode\def\tmp{$}\else\def\tmp{}\fi
		\scalebox{.925}[.925]{{\mbox{{\raisebox{.25\ht\strutbox}{\tmp#1\tmp}}
		\kern-5pt\scalebox{1.5}[1.3]{\raisebox{-.1\ht\strutbox}{/}}\kern-0.5pt
		\mbox{\raisebox{-.15\ht\strutbox}{\tmp#2\tmp}}}}}
}


\renewcommand{\P}{\mathbb{P}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\e}{\varepsilon}
\newcommand{\<}{\left\langle}
\renewcommand{\>}{\right\rangle}

\newcommand{\um}[1]{\color{blue}{#1}\color{black}}
\newcommand{\remove}[1]{\color{red}{#1}\color{black}}
\newcommand{\add}[1]{\color{green}{#1}\color{black}}

\newcommand{\keps}{\altfrac{k[\e]}{\left(\e^2\right)}}
\newcommand{\kepsi}{\altfraci{k[\e]}{\left(\e^2\right)}}
\newcommand{\mf}[1]{\mathfrak{#1}}

\DeclareMathOperator{\Bl}{Bl}
\DeclareMathOperator{\Sec}{Sec}
\DeclareMathOperator{\spec}{Spec}
\DeclareMathOperator{\res}{res}
\DeclareMathOperator{\Ima}{Im}

\begin{document}

\maketitle


\section{Introduction}
\label{sec:intro}
Our objective is to determine an enumerate formula which counts the
number of times a general cubic surface occurs in a general
$4$-parameter family $ \pi: X \to B$ of cubic surfaces.  We work
throughout with finite-type schemes over an algebraically closed,
characteristic zero ground field $k$.


\begin{definition}
  Let $\pi :X \to B$ be a flat, projective morphism of relative
  dimension $2$, with $B$ a $4$-dimensional scheme. We say $\pi$ is
  {\bf a good family of cubic surfaces} if for all $b \in B$, the
  fiber $X_{b}$ is isomorphic to a cubic surface which is not
  contained in the $PGL_4$-orbit closure of a general cubic surface.
\end{definition}

The base $B$ of a good family carries its {\sl natural} rank $4$
vector bundle
\begin{align}
  \label{eq:V}
  V := \pi_{*}\omega_{X/B}^{-1}.
\end{align}
Furthermore, $B$ admits a rational map
\begin{align}
  \label{eq:mu}
  \mu: B \dashrightarrow M
\end{align}
to the coarse moduli variety $M$ of cubic surfaces. If we further
assume, as we will from here on out, that $B$ is proper, then by
general equivariant-geometric arguments there exists a universal
weighted-degree $4$ polynomial
\begin{align}
  \label{eq:P}
  P(v_1,v_2,v_3,v_4) = a_{1^4}v_{1}^{4} + a_{1^{2}2}v_{1}^{2}v_{2} + a_{13}v_{1}v_{3} + a_{2^2}v_{2}^{2} + a_{4}v_{4}
\end{align}
in the Chern classes $v_{i} = c_{i}V$, such that
\begin{align}
  \label{eq:equality}
  \deg P(v_{1},v_{2},v_{3},v_{4}) = \deg \nu
  \end{align}
Our goal is to determine $P$, which amounts to determining
the five coefficients $a_{\bullet}$.

This is essentially an exercise in the method of indetermined
coefficients. We devote each section to the construction of a
particular good family.  After each section, we reset notation.

\section{Family $B_1$}
\label{sec:first-test-family}

In this section, we let $S \subset \P^7$ denote a degree $7$ del Pezzo
surface. We let $E_{1}, E_{2}$ denote the two disjoint lines on $S$
and we let $L \subset S$ denote the third line on $S$, which meets
both $E_{1}$ and $E_{2}$. Finally, we choose a general rational normal
quintic curve $C \subset S$ meeting $E_{2}$ at a single point other
than $L \cap E_{2}$.

\subsection{Construction of $B_1$}
\label{sec:construction-b_1}


The base of our first family is
\begin{align}
  \label{eq:B1}
  B_1 := C^{[4]} \simeq \P^{4}.
\end{align}
$B_1$ carries a good family of cubic surfaces over it.  To see this,
we note that any length four subscheme $Z \subset C$ satisfies the
property that the three dimensional span $\langle Z \rangle$
intersects $S$ at precisely the scheme $Z$. Therefore, for each such
$Z$, the linear projection from $\langle Z \rangle$
$p_{\langle Z \rangle}: S \dashrightarrow \P^{3}$ has as image an
irreducible cubic surface.  Furthermore, one can check that each of
these cubics has a finite automorphism group, and hence we have a good
family.

\subsection{Chern classes on $B_1$}
\label{sec:chern-classes-b_1}

\begin{lemma}
  \label{lemma:chernB1}
  For the natural bundle $V$ over $B_1$, we have:
  \begin{align}\nonumber
    v_{1}^{4} = 16,\\\nonumber
    v_{1}^{2}v_{2} = 4,\\\nonumber
    v_{1}v_{3} =0,\\\nonumber
    v_2^{2} = 1,\\\nonumber
    v_{4} = 0.
  \end{align}
\end{lemma}

\begin{proof}
The Chern classes $v_{1} = -2h$, $v_{2}=h^2$, and $v_{3}= v_{4}=0$,
where $h$ denotes the hyperplane class on the projective space $B_1$.)
  
\end{proof}

\subsection{Enumerating cubics in $B_1$}
\label{sec:enum-cubics-b_1}


For $B_1$ to be of any use, we must {\sl a priori} know
$\deg P(v_{1},v_{2},v_{3},v_{4})$ for $B_1$. This is easily
achievable, given basic facts about the configuration of lines on a
general cubic surface. We let
\begin{align}
  \label{eq:nu}
  \nu: M^{\dagger} \to M
  \end{align}
  denote the variety of smooth {\sl marked} cubic surfaces:
  $M^{\dagger}$ parametrizes tuples $(X, E_{1}, \dots, E_{6})$ where
  the $E_{i}$ are six disjoint lines on $X$. It is a classical fact
  that $\deg \nu = 6! \times 72$. The symmetric group $\Sigma_6$ acts
  on $M^{\dagger}$ by permuting the marked lines.

  The natural rational map to moduli $\mu : B_1 \dashrightarrow M$
  clearly factors through a map
  $\mu^{\dagger}: B_1 \dashrightarrow M^{\dagger}/\Sigma_{4}$, where
  $\Sigma_{4}$ acts by permuting the last four lines
  $E_{3}, \dots, E_{6}$.

  \begin{lemma}
    \label{lemma:degreemudaggerB1}
    $\mu^{\dagger}: B_1 \dashrightarrow M^{\dagger}$ is birational.
  \end{lemma}

Assuming this fact, we arrive at the first relation:

\begin{align}
  \label{eq:relation1}
  16 \cdot a_{1^4} + 4 \cdot a_{1^2 2} + a_{2^2} = 6! \times 3 = 2160.
\end{align}

\section{Family $B_2$}
\label{sec:family-b_2}

Our next family is a slight variant of $B_1$. Let $S$ be a degree $7$
del Pezzo surface, viewed as the blow up of the plane at two points,
with its two exceptional lines $E_1, E_2$ and its third exceptional
line $L$.  Next, fix a general conic $C \subset S$ which is {\sl
  tangent} to $L$ at a point $p$ distinct from the pair
$L \cap (E_1 \cup E_2)$.

The configuration space $C^{[4]} \simeq \P^{4}$ carries a family of
cubic surfaces $X/\P^{4}$.  Unfortunately, the configurations of the
form $x+y+2p$, $x,y \in C$, register reducible cubic surfaces, and so
$X/\P^{4}$ is not good.  This locus is a $2$-plane
$\Lambda \subset \P^{4}$.

\begin{proposition}
  \label{proposition:resolveB2} The blow up of $\P^{4}$ along
  $\Lambda$ carries a good family extending
  $X/(\P^{4} \setminus \Lambda)$.
\end{proposition}
(Actually, hold off: One needs to blow up at least one more time,
corresponding to the configuration $4p$.)
\subsection{Enumerating cubics in $B_2$}
\label{sec:enum-cubics-b_2}

Next we must compute the degree of the map to moduli
$\mu: B_2 \dashrightarrow M$. As in the case of $B_1$, $\mu$ factors
through $\mu^{\dagger}: B_2 \dashrightarrow M^\dagger/\Sigma_{4}$.
However,  there is a distinction:

\begin{proposition}
  \label{proposition:deg-mudagger2}
  We have: $\deg \mu^{\dagger} = 2$.
\end{proposition}

\section{Family $B_3$}
\label{sec:family-b_3}

We construct our third family $B_3$ be starting with a quintic del
Pezzo surface $S$, which is the blow up of the plane at four general
points, and then ``blowing up all pairs of points on $S$.''

The surface $S$ has $10$ exceptional lines $L_{1}, \dots, L_{10}$.  We
let $S^{[2]}$ denote the Hilbert scheme of pairs of points on $S$.
$S^{[2]}$ contains $10$ disjoint $\P^{2}$'s,
$\Lambda_1, \dots, \Lambda_{10}$, namely the Hilbert schemes of pairs
of points contained in the lines $L_{i}$. Let
$\Lambda = \cup_{i}\Lambda_{i}$.

\subsection{Construction of $B_3$}
\label{sec:construction-b_3}

Let $Z \subset S^{[2]} \times S$ denote the universal degree two
subscheme; $Z$ is smooth and the first projection
$\pi_1 : Z \to S^{[2]}$ is finite, flat, and has degree two.



First, observe that the open set
\begin{align}
  \label{eq:UB3}
  U := S^{[2]} \setminus \Lambda
\end{align}
supports a good family of cubic surfaces, namely
\begin{align}
  \label{eq:XUB3}
  X^{\circ} := \Bl_{Z}(S^{[2]} \times S).
\end{align}

(We encourage the reader to check that $X^{\circ}/U$ is indeed good.)

However, when we extend $X^{\circ}$ in the natural way over $S^{[2]}$
the family acquires bad fibers, namely unions of quadrics and planes,
and therefore we must modify $S^{[2]}$ along $\Lambda$.

Let
\begin{align}
  \label{eq:S2tilde}
  \widetilde{S^{[2]}} := \Bl_{\Lambda}S^{[2]}
\end{align}
denote the blow-up with blow-down map
$\beta: \widetilde{S^{[2]}} \to S^{[2]}$.  Let
$E_{i} = \beta^{-1}(\Lambda_{i})$, $i=1, \dots, 10$ denote the
components of the of the exceptional divisor of the blow-up; $\beta$
expresses $E_{i}$ as a $\P^{1}$-bundle over $\Lambda_{i}$.

Next, let $\widetilde{Z} := \widetilde{S^{[2]}} \times_{S^{[2]}} Z$
denote the fiber-product; $\widetilde{Z}$ is a closed subscheme of the
product $\widetilde{S^{[2]}} \times S$, and is a finite, flat, degree
two cover of $\widetilde{S^{[2]}}$ under the first projection
$\tilde{\pi}_{1} : \widetilde{Z} \to \widetilde{S^{[2]}}.$

Inside the product $\widetilde{S^{[2]}} \times S$ we define the
smooth, closed subschemes
\begin{align}
  \label{eq:Fi}
  F_{i} := E_{i} \times L_{i};
\end{align}
we let $F := \cup_{i}F_{i}$.  We perform one more blow-up to get 
\begin{align}
  \label{eq:Xtilde}
  Y := \Bl_{F}\widetilde{S^{[2]}} \times S.
\end{align}
The natural projection $ Y \to \widetilde{S^{[2]}}$ is a family of
surfaces with simple normal crossing singular fibers over $E_{i}$.
The next lemma is critical.

\begin{lemma}
  The closed immersion
  $\widetilde{Z} \subset \widetilde{S^{[2]}} \times S$ lifts to a
  closed immersion $\widetilde{Z} \subset Y$.
\end{lemma}

\begin{proof}
  The main observation is that we have an equality of schemes
  \begin{align}
    \label{eq:Cartier}
    F_i \cap \widetilde{Z} = \widetilde{\pi}_{1}^{-1}(E_i) \cap \widetilde{Z}
  \end{align}
  for all $i=1, \dots, 10$, {\sl and therefore $F \cap \widetilde{Z}$
    is a Cartier divisor on $\widetilde{Z}$}. The claim now follows
  from a basic property of blow-ups.
\end{proof}



We are close to describing a family of cubic surfaces over
$\widetilde{S^{[2]}}$.  We first let
\begin{align}
  \label{eq:XB3}
  Y' := \Bl_{\widetilde{Z}}Y
\end{align}
denote the blow-up,
\begin{align}
  \label{eq:phiB3}
  \varphi: Y' \to Y
\end{align}
the blow-down map, and
\begin{align}
  \label{eq:piB3}
  \pi: Y' \to \widetilde{S^{[2]}}
\end{align}
the natural projection. Finally, let $F' \subset Y'$ denote the
exceptional divisor $\varphi^{-1}(F)$.
\begin{proposition}
  \label{proposition:resolv-b3}
  There exists a line bundle $\mathcal{L}$ on $Y'$ which induces a
  rational map
  \begin{align*}
    \rho: Y' \dashrightarrow \P(\pi_{*}\mathcal{L})
  \end{align*}
  whose image $X \subset \P(\pi_{*}\mathcal{L})$ is a good family of
  cubic surfaces over $\widetilde{S^{[2]}}$ with natural bundle
  $V = \pi_{*} \mathcal{L}$.
\end{proposition}

(By image, we mean ``closure of image''.)

(This one I still am confident in -- one simple blow-up resolves the situation.)


\subsection{Relation $B_3$}
\label{sec:relation-b_3}

The relation we get from family $B_3$ ultimately appears to be:
\begin{align}
  \label{eq:relationB3}
  6a_{1^{4}} + 21a_{1^{2}2}+6a_{13}+16a_{2^{2}}+a_{4} = 36 \times 6! = 25920.
\end{align}

(There is an 80 percent chance I made a mistake in the long
calculation, so be careful.)

\section{Family $B_4$}
\label{sec:family-b_4}

For this family, we fix a degree $6$ del Pezzo surface $S$, the blow
up of the plane at three non-collinear points, and then we fix a
general ``line'' (which is really a twisted cubic) $L$ in $S$ disjoint
from the three points blown up.  An open subset $U$ of the variety
$L \times L \times S$ carries a good family of cubic surfaces in the
obvious way. However, as in the case of $B_3$, the complement of $U$
is a union of surfaces which need to be blown up before obtaining a
good family of cubic surfaces.


\section{Family $B_5$}
\label{sec:family-b_5-1}

This family is similar to $B_1$. Fix a degree $7$ del Pezzo surface
$S$, and let $D \subset S$ denote a general hyperplane section; $D$ is
a degree $7$ elliptic normal curve.  Next observe that any degree four
subscheme $Z \subset D$ imposes independent conditions on sections of
$O_{S}(1)$, and that $\langle Z \rangle \cap S = Z$.  Furthermore, for
each $Z$, the projection map
$p_{\langle Z \rangle}: S \dashrightarrow \P^{3}$ has as image an
irreducible cubic, with finite automorphism group (check this!).


Therefore, the Hilbert scheme $B_{5} = D^{[4]}$ carries a good family
of cubic surfaces.  (The reason I like this family is that, unlike
$B_1$'s case, the natural bundle $V$ has more non-trivial chern
classes. Therefore, the relation we get this time is probably not the
same as for $B_1$.

\subsection{Difficulty with $B_5$}
\label{sec:difficulty-with-b_5}

The main obstacle in using this simple family is: I do not a priori
know the cubic surface count!!!

\section{Isotrivial family of surface with 3 $A_2$ singularities}

We outline the idea and give references, in order to fill in the computation relating to \eqref{eq:equality} later. 

Our starting point is the following fact:
\begin{proposition}
\label{prop:3A2}
The cubic surface defined by $X^3 + YZW = 0$ has singularity type $3A_2$ and is semistable.
\end{proposition}

\begin{remark}
\cite[Proposition 2.2]{N05} shows that the most special singularity types that correspond to semistable surfaces are $3A_2$ and $4A_1$. 
\end{remark}

\begin{proof}
The fact that $X^3 + YZW=0$ has singularity type $3A_2$ follows from \cite[Proof of 3.1.12]{N00}. Semistability follows from \cite[Proposition 2.3]{N05}.
\end{proof}

Given \Cref{prop:3A2}, we summarize the two facts about the $3A_2$ cubic surface that makes this family work:
\begin{proposition}
\label{prop:twofacts}
The cubic surface defined by $X^3 + YZW = 0$ has a nontrivial torus stabilizer and is not in the orbit closure of any stable cubic surface.
\end{proposition}

\begin{remark}
I think that this cubic surface is the most special surface that has a nontrivial torus stabilizer but is still semistable, which is means this method of finding a twisted isotrivial family of surfaces missing the general orbit closure only works for exactly this $3A_2$ surface. 
\end{remark}

\begin{proof}
The fact that the $3A_2$ cubic surface does not lie in the general cubic surface orbit closure follows for GIT. Indeed, we have the map $\pi: \mathbb{P}^{19}\dashrightarrow \mathbb{P}^{19}//PGL_4$ and by definition of semistability, the point defined by $X^3 + YZW = 0$ is not contained in its indeterminacy locus. After removing the indeterminancy locus, orbits of stable points are fibers of $\pi$, so they cannot contain the point defined by $X^3 + YZW = 0$. {\color{red} add GIT references to make sure}
\end{proof}

Finally, we obtain our test family:
\begin{proposition}
\label{prop:isotrivialfamily}
Given a base $B$ and line bundles $L_X, L_Y, L_Z, L_W$ such that $L_X^{\otimes 3}\cong L_Y\otimes L_Z\otimes L_W$, we can form the projective bundle $\mathbb{P}(L_X\oplus L_Y\oplus L_Z\oplus L_W)$. Inside of $\mathbb{P}(L_X\oplus L_Y\oplus L_Z\oplus L_W)$ we have the cubic surface $\mathcal{X}$ defined by $\{X^3 + YZW = 0\}$ over each trivialization of $L_X, L_Y, L_Z, L_W$ over $B$. Because $L_X^{\otimes 3}\cong L_Y\otimes L_Z\otimes L_W$, the cubic surface glues compatibly under transition maps.

The family $\mathcal{X}\to B$ is a nontrivial family of cubic surfaces where no member is a contained in the orbit closure of a stable cubic surface.
\end{proposition}

Thus, \Cref{prop:isotrivialfamily} affords an enumerative problem whose answer is zero. We worked with a general base $B$, but it suffices for our purposes to let $B=\mathbb{P}^4$. 

{\color{red} I suspect we can relate this to a collection of 6 points on $P^2$ with a stabilizer, so this family looks more like Anand's many families. From \cite[Proposition 3.3]{N05}, it looks like the length 6 scheme corresponding to the $3A_2$ surface is the intersection of the union of two lines with a triple line. Don't see it yet, but writing this down to not forget.}

\subsection{Isotrivial Relation}
\label{sec:isotrivial-relation}

The relation we obtain from Dennis's trick appears to be:

\begin{align}
  \label{eq:relationDennis}
  a_{2^{2}} = 0.
\end{align}


\bibliographystyle{plain}
\bibliography{references.bib}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

